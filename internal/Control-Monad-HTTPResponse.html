<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.HTTPResponse</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-HTTPResponse.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Monad-HTTPResponse.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">workcraft-service-0.0.1: Workcraft Service - a blog and metric/data collection service</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Control.Monad.HTTPResponse</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Auxiliary Types
</a></li><li><a href="#g:2">The Monad
</a></li><li><a href="#g:3">Writer Helpers
</a></li><li><a href="#g:4">Unwrapping the monad
</a></li><li><a href="#g:5">Unit Testing the Pure HTTPResponse Monad
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Experimenting with using my own pure non-yesod monad for the handlers.
</p><p>Yesod is just too complicated when it comes to figuring out how to do the really simple
 stuff that it just seems easier to get out of the yesod code and implement the simple
 stuff myself instead of digging through the yesod code.
</p><p>This will probably help with unit testing too
</p><p>NOTE: An alternative construction of a Pure Monad to help with Proofs and Testing
 could be to use a Free Monad, I'll try this next time...
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Method">Method</a> <ul class="subs"><li>= <a href="#v:Get">Get</a>  </li><li>| <a href="#v:Post">Post</a>  </li><li>| <a href="#v:Put">Put</a>  </li><li>| <a href="#v:Delete">Delete</a>  </li></ul></li><li class="src short"><span class="keyword">newtype</span>  <a href="#t:CookieMap">CookieMap</a>  = <a href="#v:CookieMap">CookieMap</a> {<ul class="subs"><li><a href="#v:cookieMap">cookieMap</a> :: Map Text Text</li></ul>}</li><li class="src short"><span class="keyword">newtype</span>  <a href="#t:HTTPHeaders">HTTPHeaders</a>  = <a href="#v:HTTPHeaders">HTTPHeaders</a> {<ul class="subs"><li><a href="#v:runHeaders">runHeaders</a> :: Map HeaderName ByteString</li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:HTTPRequest">HTTPRequest</a>  = <a href="#v:HTTPRequest">HTTPRequest</a> {<ul class="subs"><li><a href="#v:getPrms">getPrms</a> :: Map Text Text</li><li><a href="#v:getCookieVals">getCookieVals</a> :: <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></li><li><a href="#v:reqHeaders">reqHeaders</a> :: <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></li><li><a href="#v:getContent">getContent</a> :: ByteString</li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:HTTPError">HTTPError</a> <ul class="subs"><li>= <a href="#v:HTTPNotFound">HTTPNotFound</a>  </li><li>| <a href="#v:HTTPServerError">HTTPServerError</a> Text  </li><li>| <a href="#v:HTTPBadMethod">HTTPBadMethod</a>  </li><li>| <a href="#v:HTTPPermissionDenied">HTTPPermissionDenied</a> Text  </li><li>| <a href="#v:HTTPInvalidArgs">HTTPInvalidArgs</a> [Text]  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:HTTPLogMessage">HTTPLogMessage</a> <ul class="subs"><li>= <a href="#v:Debug">Debug</a> Text  </li><li>| <a href="#v:Info">Info</a> Text  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:HTTPResponseState">HTTPResponseState</a>  = <a href="#v:HTTPResponseState">HTTPResponseState</a> {<ul class="subs"><li><a href="#v:getAllHeaders">getAllHeaders</a> :: <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></li><li><a href="#v:getSetCookie">getSetCookie</a> :: <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></li><li><a href="#v:getLogMsgs">getLogMsgs</a> :: [<a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a>]</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:HTTPResponse">HTTPResponse</a> a = <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> Identity a</li><li class="src short"><span class="keyword">data</span>  <a href="#t:HTTPResponseT">HTTPResponseT</a> m a</li><li class="src short"><a href="#v:addHeaders">addHeaders</a> :: Monad m =&gt; [(HeaderName, ByteString)] -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()</li><li class="src short"><a href="#v:logMsg">logMsg</a> :: Monad m =&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()</li><li class="src short"><a href="#v:putSessionValues">putSessionValues</a> :: Monad m =&gt; [(Text, Text)] -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()</li><li class="src short"><a href="#v:runHTTPResponse">runHTTPResponse</a> ::  <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponse">HTTPResponse</a> a -&gt; (Either <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a> a, <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a>)</li><li class="src short"><a href="#v:runHTTPResponseT">runHTTPResponseT</a> :: Monad m =&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m a -&gt; m (Either <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a> a, <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a>)</li><li class="src short"><span class="keyword">newtype</span>  <a href="#t:HTTPReport">HTTPReport</a>  = <a href="#v:HTTPReport">HTTPReport</a> <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></li><li class="src short"><span class="keyword">newtype</span>  <a href="#t:HTTPLogReport">HTTPLogReport</a>  = <a href="#v:HTTPLogReport">HTTPLogReport</a> <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Method" class="def">Method</a>  <a href="src/Control-Monad-HTTPResponse.html#Method" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Get" class="def">Get</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Post" class="def">Post</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Put" class="def">Put</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Delete" class="def">Delete</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Method" class="caption collapser" onclick="toggleSection('i:Method')">Instances</p><div id="section.i:Method" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:Method">Method</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:Method">Method</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:1">Auxiliary Types
</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:CookieMap" class="def">CookieMap</a>  <a href="src/Control-Monad-HTTPResponse.html#CookieMap" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:CookieMap" class="def">CookieMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:cookieMap" class="def">cookieMap</a> :: Map Text Text</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:CookieMap" class="caption collapser" onclick="toggleSection('i:CookieMap')">Instances</p><div id="section.i:CookieMap" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monoid <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:HTTPHeaders" class="def">HTTPHeaders</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPHeaders" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPHeaders" class="def">HTTPHeaders</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runHeaders" class="def">runHeaders</a> :: Map HeaderName ByteString</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:HTTPHeaders" class="caption collapser" onclick="toggleSection('i:HTTPHeaders')">Instances</p><div id="section.i:HTTPHeaders" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monoid <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:HTTPRequest" class="def">HTTPRequest</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPRequest" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPRequest" class="def">HTTPRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getPrms" class="def">getPrms</a> :: Map Text Text</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:getCookieVals" class="def">getCookieVals</a> :: <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:reqHeaders" class="def">reqHeaders</a> :: <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:getContent" class="def">getContent</a> :: ByteString</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:HTTPRequest" class="caption collapser" onclick="toggleSection('i:HTTPRequest')">Instances</p><div id="section.i:HTTPRequest" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:HTTPError" class="def">HTTPError</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPError" class="link">Source</a></p><div class="doc"><p>The different error codes I have used so far
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPNotFound" class="def">HTTPNotFound</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:HTTPServerError" class="def">HTTPServerError</a> Text</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:HTTPBadMethod" class="def">HTTPBadMethod</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:HTTPPermissionDenied" class="def">HTTPPermissionDenied</a> Text</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:HTTPInvalidArgs" class="def">HTTPInvalidArgs</a> [Text]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HTTPError" class="caption collapser" onclick="toggleSection('i:HTTPError')">Instances</p><div id="section.i:HTTPError" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Error <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:HTTPLogMessage" class="def">HTTPLogMessage</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPLogMessage" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Debug" class="def">Debug</a> Text</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Info" class="def">Info</a> Text</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HTTPLogMessage" class="caption collapser" onclick="toggleSection('i:HTTPLogMessage')">Instances</p><div id="section.i:HTTPLogMessage" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:HTTPResponseState" class="def">HTTPResponseState</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPResponseState" class="link">Source</a></p><div class="doc"><p>Represents the accrued headers and cookie key-value settings
 from a REST computation
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPResponseState" class="def">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getAllHeaders" class="def">getAllHeaders</a> :: <a href="Control-Monad-HTTPResponse.html#t:HTTPHeaders">HTTPHeaders</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:getSetCookie" class="def">getSetCookie</a> :: <a href="Control-Monad-HTTPResponse.html#t:CookieMap">CookieMap</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:getLogMsgs" class="def">getLogMsgs</a> :: [<a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a>]</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:HTTPResponseState" class="caption collapser" onclick="toggleSection('i:HTTPResponseState')">Instances</p><div id="section.i:HTTPResponseState" class="show"><table><tr><td class="src">Eq <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monoid <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monad m =&gt; MonadWriter <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a> (<a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">The Monad
</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:HTTPResponse" class="def">HTTPResponse</a> a = <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> Identity a<a href="src/Control-Monad-HTTPResponse.html#HTTPResponse" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:HTTPResponseT" class="def">HTTPResponseT</a> m a <a href="src/Control-Monad-HTTPResponse.html#HTTPResponseT" class="link">Source</a></p><div class="doc"><p>we want error reporting, logging, accumulation of headers and cookie values,
 and its going to read in the original request that spurred off the original REST
 computation.
</p></div><div class="subs instances"><p id="control.i:HTTPResponseT" class="caption collapser" onclick="toggleSection('i:HTTPResponseT')">Instances</p><div id="section.i:HTTPResponseT" class="show"><table><tr><td class="src">MonadTrans <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monad m =&gt; MonadWriter <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a> (<a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Monad m =&gt; Monad (<a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">Writer Helpers
</h1><div class="top"><p class="src"><a name="v:addHeaders" class="def">addHeaders</a> :: Monad m =&gt; [(HeaderName, ByteString)] -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()<a href="src/Control-Monad-HTTPResponse.html#addHeaders" class="link">Source</a></p><div class="doc"><p>Sets a header
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>HTTPReport $ snd $ testHTTPResponse (addHeaders [&quot;Content-Type&quot; .: &quot;application/xml&quot;, &quot;Some-Other-Header&quot; .: &quot;And its value&quot;])
</code></strong>Headers:
&quot;Content-Type&quot;: &quot;application/xml&quot;
&quot;Some-Other-Header&quot;: &quot;And its value&quot;
Session Values:
</pre></div></div><div class="top"><p class="src"><a name="v:logMsg" class="def">logMsg</a> :: Monad m =&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPLogMessage">HTTPLogMessage</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()<a href="src/Control-Monad-HTTPResponse.html#logMsg" class="link">Source</a></p><div class="doc"><p>For writing log messages...
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let debugLogLine = logMsg (Debug &quot;Test Debug Log Line&quot;)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let infoLogLine  = logMsg (Info &quot;Test Info Log Line&quot;)
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(HTTPLogReport . snd . testHTTPResponse) debugLogLine
</code></strong>(Debug) &quot;Test Debug Log Line&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(HTTPLogReport . snd . testHTTPResponse) infoLogLine
</code></strong>(Info) &quot;Test Info Log Line&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(HTTPLogReport . snd . testHTTPResponse . sequence_) [debugLogLine, infoLogLine]
</code></strong>(Debug) &quot;Test Debug Log Line&quot;
(Info) &quot;Test Info Log Line&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(HTTPLogReport . snd . testHTTPResponse . sequence_) [infoLogLine, debugLogLine]
</code></strong>(Info) &quot;Test Info Log Line&quot;
(Debug) &quot;Test Debug Log Line&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:putSessionValues" class="def">putSessionValues</a> :: Monad m =&gt; [(Text, Text)] -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m ()<a href="src/Control-Monad-HTTPResponse.html#putSessionValues" class="link">Source</a></p><div class="doc"><p>Writes session values
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>HTTPReport $ snd $ testHTTPResponse (putSessionValues [&quot;_id&quot; .: &quot;blah234356d&quot;, &quot;somethingelse&quot; .: &quot;blach&quot;])
</code></strong>Headers:
Session Values:
&quot;_id&quot;: &quot;blah234356d&quot;
&quot;somethingelse&quot;: &quot;blach&quot;
</pre></div></div><h1 id="g:4">Unwrapping the monad
</h1><div class="top"><p class="src"><a name="v:runHTTPResponse" class="def">runHTTPResponse</a> ::  <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponse">HTTPResponse</a> a -&gt; (Either <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a> a, <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a>)<a href="src/Control-Monad-HTTPResponse.html#runHTTPResponse" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:runHTTPResponseT" class="def">runHTTPResponseT</a> :: Monad m =&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPRequest">HTTPRequest</a> -&gt; <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseT">HTTPResponseT</a> m a -&gt; m (Either <a href="Control-Monad-HTTPResponse.html#t:HTTPError">HTTPError</a> a, <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a>)<a href="src/Control-Monad-HTTPResponse.html#runHTTPResponseT" class="link">Source</a></p></div><h1 id="g:5">Unit Testing the Pure HTTPResponse Monad
</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:HTTPReport" class="def">HTTPReport</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPReport" class="link">Source</a></p><div class="doc"><p>Wrap a HTTPResponseState with this in a doctest and it will result in the header and cookie values being displayed.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPReport" class="def">HTTPReport</a> <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HTTPReport" class="caption collapser" onclick="toggleSection('i:HTTPReport')">Instances</p><div id="section.i:HTTPReport" class="show"><table><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPReport">HTTPReport</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:HTTPLogReport" class="def">HTTPLogReport</a>  <a href="src/Control-Monad-HTTPResponse.html#HTTPLogReport" class="link">Source</a></p><div class="doc"><p>Wrap a HTTPResponseState with this in a doctest and it will result in the log lines associated with the state being displayed.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HTTPLogReport" class="def">HTTPLogReport</a> <a href="Control-Monad-HTTPResponse.html#t:HTTPResponseState">HTTPResponseState</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HTTPLogReport" class="caption collapser" onclick="toggleSection('i:HTTPLogReport')">Instances</p><div id="section.i:HTTPLogReport" class="show"><table><tr><td class="src">Show <a href="Control-Monad-HTTPResponse.html#t:HTTPLogReport">HTTPLogReport</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>